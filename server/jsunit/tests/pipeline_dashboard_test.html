<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- *************************GO-LICENSE-START******************************
 * Copyright 2014 ThoughtWorks, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *************************GO-LICENSE-END******************************* -->

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>CCE Dashboard Tests</title>
<link rel="stylesheet" type="text/css" href="../css/jsUnitStyle.css"/>
<link rel="stylesheet" type="text/css" href="../css/jsUnitStyle.css"/>
<script language="JavaScript" type="text/javascript" src="../app/jsUnitCore.js"></script>
<script language="JavaScript" type="text/javascript" src="../app/jsUnitVersionCheck.js"></script>
<script language="JavaScript" type="text/javascript" src="../app/jsTestHelper.js"></script>
<script language="JavaScript" type="text/javascript" src="../compressed/jquery-1.7.2.js"></script>
<script language="JavaScript" type="text/javascript" src="../compressed/prototype-1.6.0.js"></script>
<script language="JavaScript" type="text/javascript" src="../compressed/angular.1.0.8.min.js"></script>
<script language="JavaScript" type="text/javascript" src="../compressed/bootstrap-2.3.2.min.js"></script>
<script language="JavaScript" type="text/javascript" src="../compressed/d3-3.1.5.min.js"></script>
<script language="JavaScript" type="text/javascript" src="../compressed/lib.js"></script>
<script language="JavaScript" type="text/javascript" src="../compressed/all.js"></script>
<script language="JavaScript" type="text/javascript" src="../compressed/test_helper.js"></script>
<script language="JavaScript" type="text/javascript" src="../app/after_load_enhancements.js"></script>


<script language="JavaScript" type="text/javascript">
    //<![CDATA[ --Dont delete this line. Required by rspec
    var originalAjaxRequest = jQuery.ajax;
    var element_under_test;
    var newPageUrl = null;
    var util_load_page_fn = null;
    var xhr = null;

    function isBrowserIE() {
        return window.navigator.userAgent.toLowerCase().indexOf("msie") != -1;
    }

    function setUp() {
        element_under_test = $$('.under_test').first().innerHTML;
        util_load_page_fn = Util.loadPage;
        Util.loadPage = function(url) {
            newPageUrl = url;
        };
        xhr = {
            getResponseHeader: function(name) {
                return "holy_cow_new_url_is_sooooo_cool!!!";
            }
        };
    }
    function tearDown() {
        Util.loadPage = util_load_page_fn;
        jQuery.ajax = originalAjaxRequest;
        $$('.under_test').first().update(element_under_test);
    }

    function test_add_newly_added_group_to_the_page() {
        jQuery.ajax = function(options) {
            options.success({"pipeline_group_group-3_panel" : {html: "<div class='pipelines'><div class='content_wrapper_outer'><div class='content_wrapper_inner'>pipeline</div></div></div>", parent_id: "pipeline_groups_container", type: "group_of_pipelines"},
                "pipeline_third_panel" : {html: "Pipeline3", parent_id: "pipeline_group_group-3_panel", type: "pipeline"}});
            options.complete(xhr);
        };
        var refresher = new DashboardAjaxRefresher("http//blah/pipelines.html", {redirectUrl: "foo", className: ".pipeline_group"});
        refresher.stopRefresh();
        refresher.restartRefresh();
        assertEquals("Pipeline3", $$("#pipeline_group_group-3_panel .pipelines .content_wrapper_outer .content_wrapper_inner #pipeline_third_panel")[0].innerHTML);
    }

    function test_should_update_currently_present_pipeline() {
        jQuery.ajax = function(options) {
            options.success({"pipeline_group_group-1_panel" : {html: "whatever" , parent_id: "pipeline_groups_container", type: "group_of_pipelines"},
                "pipeline_pipeline-1_panel" : {html: "Updated Pipeline", parent_id: "pipeline_group_group-1_panel", type: "pipeline"}});
            options.complete(xhr);
        };
        var refresher = new DashboardAjaxRefresher("http//blah/pipelines.html", {redirectUrl: "foo", className: ".pipeline_group"});
        refresher.stopRefresh();
        refresher.restartRefresh();
        assertEquals("Updated Pipeline", $$("#pipeline_group_group-1_panel #pipeline_pipeline-1_panel").first().innerHTML);
    }

    function test_should_honor_tag_attr_for_newly_added_elements() {
        jQuery.ajax = function(options) {
            options.success({
                "pipeline_group_group-3_panel" : {html: "<div class='pipelines'><div class='content_wrapper_outer'><div class='content_wrapper_inner'>pipeline</div></div></div>", parent_id: "pipeline_groups_container", type: "group_of_pipelines", tag_attr: {className: "group_class", title: "group_title"}},
                "newly_added_pipeline_with_attrs" : {html: "First Pipeline" , parent_id: "pipeline_group_group-3_panel", index: 0, type: 'pipeline', tag_attr: {className: "pipeline", title: "pipeline_title"}}});
            options.complete(xhr);
        };
        var refresher = new DashboardAjaxRefresher("http//blah/pipelines.html", {redirectUrl: "foo", className: ".pipeline_group"});
        refresher.stopRefresh();
        refresher.restartRefresh();
        assertEquals("must update css class for group div", "group_class", $("pipeline_group_group-3_panel").readAttribute("class"));
        assertEquals("must update title for group div", "group_title", $("pipeline_group_group-3_panel").readAttribute("title"));
        assertEquals("must update css class for pipeline div", "pipeline", $("newly_added_pipeline_with_attrs").readAttribute("class"));
        assertEquals("must update title for pipeline div", "pipeline_title", $("newly_added_pipeline_with_attrs").readAttribute("title"));
    }

    function test_add_newly_added_group_at_the_given_index() {
        jQuery.ajax = function(options) {
            options.success({"pipeline_group_group-1_panel" : {html: "<div class='pipeline_group'>group1</div>" , parent_id: "pipeline_groups_container", index: 0, type: "group_of_pipelines"},
                "pipeline_group_group-2_panel" :{html: "<div class='pipeline_group'>group2</div>", parent_id: "pipeline_groups_container", index: 1, type: "group_of_pipelines"},
                "newly_added_group" :{html:"<div class='pipeline_group'>new_text</div>", parent_id: "pipeline_groups_container", index: 2, type: "group_of_pipelines"}});
            options.complete(xhr);
        };
        var refresher = new DashboardAjaxRefresher("http//blah/pipelines.html", {redirectUrl: "foo", className: ".pipeline_group"});
        refresher.stopRefresh();
        refresher.restartRefresh();
        var groups = $$(".pipeline_group");

        assertEquals(3, groups.length);
        assertEquals("new_text", groups[2].innerHTML);
    }

    function test_remove_removed_group_from_the_page() {
        jQuery.ajax = function(options) {
            options.success({"pipeline_group_group-1_panel" : {html: "group1" , parent_id: "pipeline_groups_container", type: "group_of_pipelines"}});
            options.complete(xhr);
        };
        var refresher = new DashboardAjaxRefresher("http//blah/pipelines.html", {redirectUrl: "foo", className: ".pipeline_group"});
        refresher.stopRefresh();
        refresher.restartRefresh();
        assertTrue($$("#pipeline_group_group-1_panel").length == 1);
        assertTrue($$("#pipeline_group_group-2_panel").length == 0);
    }

    function test_should_return_false_if_group_already_present() {
        jQuery.ajax = function(options) {
            options.success({"pipeline_group_group-1_panel" : {html: "group1" , parent_id: "pipeline_groups_container", type: "group_of_pipelines"}});
            options.complete(xhr);
        };
        new DashboardAjaxRefresher("http//blah/pipelines.html", {redirectUrl: "foo", className: ".pipeline_group"});
        assertFalse("group1" === $("pipeline_group_group-1_panel").innerHTML);
    }

    function test_should_add_update_and_remove_pipelines_of_an_existing_group() {
        if(!isBrowserIE()){                    //Fails only in IE. Temporary workaround
            jQuery.ajax = function(options) {
                options.success({
                    "pipeline_group_group-1_panel" : { html: "<div class='pipelines'><div class='content_wrapper_outer'><div class='content_wrapper_inner'>pipeline</div></div></div>" , parent_id: "pipeline_groups_container", type: 'group_of_pipelines'},
                    "newly_added_pipeline1" : {html: "First Pipeline" , parent_id: "pipeline_group_group-1_panel", index: 0, type: 'pipeline'},
                    "pipeline_pipeline-1_panel" : {html: "New Text" , parent_id: "pipeline_group_group-1_panel", index: 1, type: 'pipeline'},
                    "newly_added_pipeline2" : {html: "Second Pipeline" , parent_id: "pipeline_group_group-1_panel", index: 2, type: 'pipeline'}
                });
                options.complete(xhr);
            };
            var refresher = new DashboardAjaxRefresher("http//blah/pipelines.html", {redirectUrl: "foo", className: ".pipeline_group"});
            refresher.stopRefresh();
            refresher.restartRefresh();
            var pipelines = $$("#pipeline_group_group-1_panel .pipelines .content_wrapper_outer .content_wrapper_inner .pipeline");
            assertEquals(3, pipelines.length);
            assertEquals("newly_added_pipeline1", pipelines[0].id);
            assertEquals("First Pipeline", pipelines[0].innerHTML);

            assertEquals("pipeline_pipeline-1_panel", pipelines[1].id);
            assertEquals("New Text", pipelines[1].innerHTML);

            assertEquals("newly_added_pipeline2", pipelines[2].id);
            assertEquals("Second Pipeline", pipelines[2].innerHTML);

            assertNull("Second group must have been null", $("pipeline_group_group-2_panel"));
            assertNull("pipeline_pipeline-2_panel Must have been null", $("pipeline_pipeline-2_panel"));
            assertNull("pipeline_pipeline-3_panel Must have been null", $("pipeline_pipeline-3_panel"));
            assertNull("pipeline_pipeline-4_panel Must have been null", $("pipeline_pipeline-4_panel"));
        }
    }

    function test_should_remove_pipelines_of_an_existing_group() {
        if(!isBrowserIE()){                    //Fails only in IE. Temporary workaround
            jQuery.ajax = function(options) {
                options.success({
                    "pipeline_group_group-1_panel" : { html: "<div class='pipelines'><div class='content_wrapper_outer'><div class='content_wrapper_inner'>pipeline</div></div></div>" , parent_id: "pipeline_groups_container", type: 'group_of_pipelines'},
                    "pipeline_pipeline-2_panel" : {html: "New Text" , parent_id: "pipeline_group_group-1_panel", index: 0, type: 'pipeline'}
                });
                options.complete(xhr);
            };
            var refresher = new DashboardAjaxRefresher("http//blah/pipelines.html", {redirectUrl: "foo", className: ".pipeline_group"});
            refresher.stopRefresh();
            refresher.restartRefresh();
            var pipelines = $$("#pipeline_group_group-1_panel .pipelines .content_wrapper_outer .content_wrapper_inner .pipeline");
            assertEquals(1, pipelines.length);
            assertEquals("pipeline_pipeline-2_panel", pipelines[0].id);
            assertEquals("New Text", pipelines[0].innerHTML);

            assertNull("Second group must have been null", $("pipeline_group_group-2_panel"));
            assertNull("pipeline_pipeline-1_panel Must have been null", $("pipeline_pipeline-1_panel"));
            assertNull("pipeline_pipeline-3_panel Must have been null", $("pipeline_pipeline-3_panel"));
            assertNull("pipeline_pipeline-4_panel Must have been null", $("pipeline_pipeline-4_panel"));
        }
    }


    function test_should_update_when_pipelines_are_moved_between_groups() {
        jQuery.ajax = function(options) {
            options.success({
                "pipeline_group_group-1_panel" : { html: "<div class='pipelines'><div class='content_wrapper_outer'><div class='content_wrapper_inner'>pipeline</div></div></div>" , parent_id: "pipeline_groups_container", type: 'group_of_pipelines'},
                "pipeline_group_group-2_panel" : { html: "<div class='pipelines'><div class='content_wrapper_outer'><div class='content_wrapper_inner'>pipeline</div></div></div>" , parent_id: "pipeline_groups_container", type: 'group_of_pipelines'},
                "pipeline_pipeline-2-1_panel" : {html: "New Text" , parent_id: "pipeline_group_group-1_panel", index: 0, type: 'pipeline'},
                "pipeline_pipeline-1_panel" : {html: "First Pipeline" , parent_id: "pipeline_group_group-2_panel", index: 0, type: 'pipeline'}
            });
            options.complete(xhr);
        };
        var refresher = new DashboardAjaxRefresher("http//blah/pipelines.html", {redirectUrl: "foo", className: ".pipeline_group"});
        refresher.stopRefresh();
        refresher.restartRefresh();
        assertTrue("Pipeline from group 2 must have been under group 1", $$("#pipeline_group_group-1_panel .pipelines .content_wrapper_outer .content_wrapper_inner DIV#pipeline_pipeline-2-1_panel").length == 1);
        assertTrue("Pipeline from group 1 must have been under group 2", $$("#pipeline_group_group-2_panel .pipelines .content_wrapper_outer .content_wrapper_inner DIV#pipeline_pipeline-1_panel").length == 1);
    }

    function test_should_work_with_pipelines_with_dot() {
        var html = '<div id="pipeline_group_group.1_panel">' +
                   '<div class="pipeline_bundle pipeline_group">' +
                   '<h2 class="entity_title">group.1</h2>' +
                   '<div class="pipelines">' +
                   '<div class="content_wrapper_outer"><div class="content_wrapper_inner"> ' +
                   '<div id="pipeline_pipeline.1_panel"  class="pipeline"> <h3 class="title entity_title">pipeline.1' +
                   '</h3></div></div></div></div></div></div>';

        $("pipeline_groups_container").update(html);
        jQuery.ajax = function(options) {
            options.success({
                "pipeline_group_group.1_panel" : { html: "<div class='pipelines'><div class='content_wrapper_outer'><div class='content_wrapper_inner'>pipeline</div></div></div>" , parent_id: "pipeline_groups_container", type: 'group_of_pipelines'},
                "pipeline_pipeline.1_panel" : {html: "New Text" , parent_id: "pipeline_group_group.1_panel", index: 0, type: 'pipeline'}
            });
            options.complete(xhr);
        };
        var refresher = new DashboardAjaxRefresher("http//blah/pipelines.html", {redirectUrl: "foo", className: ".pipeline_group"});
        refresher.stopRefresh();
        refresher.restartRefresh();
        assertTrue("Pipeline group must be present", $("pipeline_group_group.1_panel") != null);
        assertTrue("Pipeline must be present", $("pipeline_group_group.1_panel").select(".pipelines .content_wrapper_outer .content_wrapper_inner div[id='pipeline_pipeline.1_panel']").length == 1);
    }


    //]]>--Dont delete this line. Required by rspec
</script>
</head>
<body>
<div class='under_test'>
    <div class="dashboard_microcontent_popup dashboard_build_cause_like_microcontent_popups">
        <div class="hidden changes enhanced_dropdown" id="dashboard_build_cause_content">&nbsp;</div>
    </div>
    <div id='pipeline_groups_container'>
        <div id='pipeline_group_group-1_panel'>
            <div class='pipeline_bundle pipeline_group'>
                <div class='pipelines'>
                    <div class='content_wrapper_outer'>
                        <div class='content_wrapper_inner'><h2 class='entity_title'>group-1</h2>

                            <div id='pipeline_pipeline-1_panel' class='pipeline'>
                                <div class='pipeline_header'>
                                    <div class='pipeline_actions'>
                                    </div>
                                    <div class='pipeline_name_link'><h3 class='title entity_title '><a href='/tab/pipeline/history/pipeline-1'>pipeline-1</a></h3></div>
                                </div>
                                <div class='alert' id='trigger-result-pipeline-1'></div>
                                <div class='pipeline_instance'>
                                    <div class='status details'>
                                        <div class='label'> Label: <a href='/pipelines/value_stream_map/pipeline-1/5' title='label-1'>label-1</a></div>
                                        <span class='compare_pipeline dashboard'>
                                            <a href='/compare/pipeline-1/4/with/5' title='Compare with the previous build'>Compare</a>
                                        </span>
                                        <div class='pipeline_instance_details'>
                                            <div class='schedule_time' title='REPLACED_DATE_TIME'> (Triggered&nbsp;by&nbsp; <span class='who'>Anonymous</span> &nbsp;<span class='time'/> <input type='hidden' value='REPLACED_DATE_TIME_MILLIS'/> )</div>
                                            <div class='stages'>
                                                <div class='latest_stage'>
                                                    Passed: cruise
                                                </div>
                                                <a href='/pipelines/pipeline-1/5/cruise/10' class='stage'>
                                                    <div class='stage_bar_wrapper last_run_stage'>
                                                        <div class='stage_bar Passed' title='cruise (Passed)' data-stage='cruise' style='width: 19.75em'>

                                                        </div>
                                                    </div>
                                                </a></div>
                                        </div>
                                    </div>
                                    <div class='previously_wrapper'>

                                    </div>
                                </div>
                                <div class='pipeline_operations'>
                                    <form accept-charset='UTF-8' action='/api/pipelines/pipeline-1/schedule' method='post'
                                          onsubmit="PipelineOperations.onTrigger(this, 'pipeline-1', '/api/pipelines/pipeline-1/schedule'); return false;; ">
                                        <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
                                        <div class='operate trigger_wrapper'>
                                            <button class='image submit' id='deploy-pipeline-1' title='Trigger' type='submit' value='Trigger'><span title='Trigger'> </span></button>
                                        </div>
                                    </form>
                                    <form accept-charset='UTF-8' action='/pipelines/show_for_trigger' method='post'
                                          onsubmit="PipelineOperations.onTriggerWithOptions(this, 'pipeline-1', 'Trigger', '/pipelines/show_for_trigger'); return false;; ">
                                        <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
                                        <input type='hidden' name='pipeline_name' value='pipeline-1'/>

                                        <div class='operate trigger_with_options_wrapper'>
                                            <button class='image submit' id='deploy-with-options-pipeline-1' title='Trigger with options' type='submit' value='Trigger with options'><span
                                                    title='Trigger with options'> </span></button>
                                        </div>
                                    </form>
                                    <div class='operate pause_wrapper'>
                                        <button class='image submit' id='confirm-pause-pipeline-1'
                                                onclick='Modalbox.show($(&quot;pause-info-pipeline-1&quot;),{title: &quot;Pause pipeline: pipeline-1 &quot;,overlayClose:false})' title='Pause'
                                                type='submit' value='Pause'><span title='Pause'> </span></button>
                                    </div>
                                    <div id='pause-info-pipeline-1' style='display:none'>
                                        <form action='/api/pipelines/pipeline-1/pause' method='post'
                                              onsubmit="PipelineOperations.onPause(this, 'pipeline-1', '/api/pipelines/pipeline-1/pause'); return false;">
                                            <div class='sub_tab_container'>
                                                <div class='pause_reason'> Specify a reason for pausing schedule on pipeline 'pipeline-1': <input type='text' name='pauseCause' maxlength='255'/></div>
                                            </div>
                                            <div class='actions'>
                                                <button class='primary submit' id='pause-pipeline-1' type='submit' value='Ok'><span>OK</span></button>
                                                <button class='submit button' onclick='Modalbox.hide()' type='button' value='Close'><span>CLOSE</span></button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class='divider'></div>
                            <div id='pipeline_pipeline-2_panel' class='pipeline'>
                                <div class='pipeline_header'>
                                    <div class='pipeline_actions'>
                                    </div>
                                    <div class='pipeline_name_link'><h3 class='title entity_title '><a href='/tab/pipeline/history/pipeline-2'>pipeline-2</a></h3></div>
                                </div>
                                <div class='alert' id='trigger-result-pipeline-2'></div>
                                <div class='pipeline_instance'>
                                    <div class='status details'>
                                        <div class='label'> Label: <a href='/pipelines/value_stream_map/pipeline-2/5' title='label-2'>label-2</a></div>
                                        <span class='compare_pipeline dashboard'>
                                            <a href='/compare/pipeline-2/4/with/5' title='Compare with the previous build'>Compare</a>
                                        </span>
                                        <div class='pipeline_instance_details'>
                                            <div class='schedule_time' title='REPLACED_DATE_TIME'> (Triggered&nbsp;by&nbsp; <span class='who'>Anonymous</span> &nbsp;<span class='time'/> <input type='hidden' value='REPLACED_DATE_TIME_MILLIS'/> )</div>
                                            <div class='stages'>
                                                <div class='latest_stage'>
                                                    Building: cruise
                                                </div>
                                                <a href='/pipelines/pipeline-2/5/cruise/10' class='stage'>
                                                    <div class='stage_bar_wrapper last_run_stage'>
                                                        <div class='stage_bar Building' title='cruise (Building)' data-stage='cruise' style='width: 19.75em'>

                                                        </div>
                                                    </div>
                                                </a></div>
                                        </div>
                                    </div>
                                    <div class='previously_wrapper'>
                                        <div class='previously'><span class='label'>Previously: </span> <a class='result' href='/pipelines/pipeline-2/3/cruise/2' title='label-007'> <span
                                                class='color_code_small Failed'> </span> Failed </a></div>
                                    </div>
                                </div>
                                <div class='pipeline_operations'>
                                    <form accept-charset='UTF-8' action='/api/pipelines/pipeline-2/schedule' method='post'
                                          onsubmit="PipelineOperations.onTrigger(this, 'pipeline-2', '/api/pipelines/pipeline-2/schedule'); return false;; ">
                                        <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
                                        <div class='operate trigger_wrapper'>
                                            <button class='image submit' id='deploy-pipeline-2' title='Trigger' type='submit' value='Trigger'><span title='Trigger'> </span></button>
                                        </div>
                                    </form>
                                    <form accept-charset='UTF-8' action='/pipelines/show_for_trigger' method='post'
                                          onsubmit="PipelineOperations.onTriggerWithOptions(this, 'pipeline-2', 'Trigger', '/pipelines/show_for_trigger'); return false;; ">
                                        <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
                                        <input type='hidden' name='pipeline_name' value='pipeline-2'/>

                                        <div class='operate trigger_with_options_wrapper'>
                                            <button class='image submit' id='deploy-with-options-pipeline-2' title='Trigger with options' type='submit' value='Trigger with options'><span
                                                    title='Trigger with options'> </span></button>
                                        </div>
                                    </form>
                                    <div class='operate pause_wrapper'>
                                        <button class='image submit' id='confirm-pause-pipeline-2'
                                                onclick='Modalbox.show($(&quot;pause-info-pipeline-2&quot;),{title: &quot;Pause pipeline: pipeline-2 &quot;,overlayClose:false})' title='Pause'
                                                type='submit' value='Pause'><span title='Pause'> </span></button>
                                    </div>
                                    <div id='pause-info-pipeline-2' style='display:none'>
                                        <form action='/api/pipelines/pipeline-2/pause' method='post'
                                              onsubmit="PipelineOperations.onPause(this, 'pipeline-2', '/api/pipelines/pipeline-2/pause'); return false;">
                                            <div class='sub_tab_container'>
                                                <div class='pause_reason'> Specify a reason for pausing schedule on pipeline 'pipeline-2': <input type='text' name='pauseCause' maxlength='255'/></div>
                                            </div>
                                            <div class='actions'>
                                                <button class='primary submit' id='pause-pipeline-2' type='submit' value='Ok'><span>OK</span></button>
                                                <button class='submit button' onclick='Modalbox.hide()' type='button' value='Close'><span>CLOSE</span></button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class='divider'></div>
                            <div id='pipeline_pipeline-3_panel' class='pipeline'>
                                <div class='pipeline_header'>
                                    <div class='pipeline_actions'>
                                    </div>
                                    <div class='pipeline_name_link'><h3 class='title entity_title '><a href='/tab/pipeline/history/pipeline-3'>pipeline-3</a></h3></div>
                                </div>
                                <div class='alert' id='trigger-result-pipeline-3'></div>
                                <div class='pipeline_instance'>
                                    <div class='status details'>
                                        <div class='label'> Label: <a href='/pipelines/value_stream_map/pipeline-3/5' title='label-3'>label-3</a></div>
                                        <span class='compare_pipeline dashboard'> <a href='/compare/pipeline-3/4/with/5' title='Compare with the previous build'>Compare</a> </span>
                                        <div class='pipeline_instance_details'>
                                            <div class='schedule_time' title='REPLACED_DATE_TIME'> (Triggered&nbsp;by&nbsp; <span class='who'>Anonymous</span> &nbsp;<span class='time'/> <input type='hidden' value='REPLACED_DATE_TIME_MILLIS'/> )</div>
                                            <div class='stages'>
                                                <div class='latest_stage'>
                                                    Passed: cruise
                                                </div>
                                                <a href='/pipelines/pipeline-3/5/cruise/10' class='stage'>
                                                    <div class='stage_bar_wrapper last_run_stage'>
                                                        <div class='stage_bar Passed' title='cruise (Passed)' data-stage='cruise' style='width: 19.75em'>

                                                        </div>
                                                    </div>
                                                </a></div>
                                        </div>
                                    </div>
                                    <div class='previously_wrapper'>

                                    </div>
                                </div>
                                <div class='pipeline_operations'>
                                    <form accept-charset='UTF-8' action='/api/pipelines/pipeline-3/schedule' method='post'
                                          onsubmit="PipelineOperations.onTrigger(this, 'pipeline-3', '/api/pipelines/pipeline-3/schedule'); return false;; ">
                                        <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
                                        <div class='operate trigger_wrapper'>
                                            <button class='image submit' id='deploy-pipeline-3' title='Trigger' type='submit' value='Trigger'><span title='Trigger'> </span></button>
                                        </div>
                                    </form>
                                    <form accept-charset='UTF-8' action='/pipelines/show_for_trigger' method='post'
                                          onsubmit="PipelineOperations.onTriggerWithOptions(this, 'pipeline-3', 'Trigger', '/pipelines/show_for_trigger'); return false;; ">
                                        <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
                                        <input type='hidden' name='pipeline_name' value='pipeline-3'/>

                                        <div class='operate trigger_with_options_wrapper'>
                                            <button class='image submit' id='deploy-with-options-pipeline-3' title='Trigger with options' type='submit' value='Trigger with options'><span
                                                    title='Trigger with options'> </span></button>
                                        </div>
                                    </form>
                                    <div class='operate pause_wrapper'>
                                        <button class='image submit' id='confirm-pause-pipeline-3'
                                                onclick='Modalbox.show($(&quot;pause-info-pipeline-3&quot;),{title: &quot;Pause pipeline: pipeline-3 &quot;,overlayClose:false})' title='Pause'
                                                type='submit' value='Pause'><span title='Pause'> </span></button>
                                    </div>
                                    <div id='pause-info-pipeline-3' style='display:none'>
                                        <form action='/api/pipelines/pipeline-3/pause' method='post'
                                              onsubmit="PipelineOperations.onPause(this, 'pipeline-3', '/api/pipelines/pipeline-3/pause'); return false;">
                                            <div class='sub_tab_container'>
                                                <div class='pause_reason'> Specify a reason for pausing schedule on pipeline 'pipeline-3': <input type='text' name='pauseCause' maxlength='255'/></div>
                                            </div>
                                            <div class='actions'>
                                                <button class='primary submit' id='pause-pipeline-3' type='submit' value='Ok'><span>OK</span></button>
                                                <button class='submit button' onclick='Modalbox.hide()' type='button' value='Close'><span>CLOSE</span></button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class='divider'></div>
                            <div id='pipeline_pipeline-4_panel' class='pipeline'>
                                <div class='pipeline_header'>
                                    <div class='pipeline_actions'>
                                    </div>
                                    <div class='pipeline_name_link'><h3 class='title entity_title '><a href='/tab/pipeline/history/pipeline-4'>pipeline-4</a></h3></div>
                                </div>
                                <div class='alert' id='trigger-result-pipeline-4'></div>
                                <div class='pipeline_instance'>
                                    <div class='status details'>
                                        <div class='label'> Label: <a href='/pipelines/value_stream_map/pipeline-4/5' title='label-4'>label-4</a></div>
                                        <span class='compare_pipeline dashboard'> <a href='/compare/pipeline-4/4/with/5' title='Compare with the previous build'>Compare</a> </span>
                                        <div class='pipeline_instance_details'>
                                            <div class='schedule_time' title='REPLACED_DATE_TIME'> (Triggered&nbsp;by&nbsp; <span class='who'>Anonymous</span> &nbsp;<span class='time'/> <input type='hidden' value='REPLACED_DATE_TIME_MILLIS'/> )</div>
                                            <div class='stages'>
                                                <div class='latest_stage'>
                                                    Passed: cruise
                                                </div>
                                                <a href='/pipelines/pipeline-4/5/cruise/10' class='stage'>
                                                    <div class='stage_bar_wrapper last_run_stage'>
                                                        <div class='stage_bar Passed' title='cruise (Passed)' data-stage='cruise' style='width: 19.75em'>

                                                        </div>
                                                    </div>
                                                </a></div>
                                        </div>
                                    </div>
                                    <div class='previously_wrapper'>

                                    </div>
                                </div>
                                <div class='pipeline_operations'>
                                    <form accept-charset='UTF-8' action='/api/pipelines/pipeline-4/schedule' method='post'
                                          onsubmit="PipelineOperations.onTrigger(this, 'pipeline-4', '/api/pipelines/pipeline-4/schedule'); return false;; ">
                                        <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
                                        <div class='operate trigger_wrapper'>
                                            <button class='image submit' id='deploy-pipeline-4' title='Trigger' type='submit' value='Trigger'><span title='Trigger'> </span></button>
                                        </div>
                                    </form>
                                    <form accept-charset='UTF-8' action='/pipelines/show_for_trigger' method='post'
                                          onsubmit="PipelineOperations.onTriggerWithOptions(this, 'pipeline-4', 'Trigger', '/pipelines/show_for_trigger'); return false;; ">
                                        <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
                                        <input type='hidden' name='pipeline_name' value='pipeline-4'/>

                                        <div class='operate trigger_with_options_wrapper'>
                                            <button class='image submit' id='deploy-with-options-pipeline-4' title='Trigger with options' type='submit' value='Trigger with options'><span
                                                    title='Trigger with options'> </span></button>
                                        </div>
                                    </form>
                                    <div class='operate pause_wrapper'>
                                        <button class='image submit' id='confirm-pause-pipeline-4'
                                                onclick='Modalbox.show($(&quot;pause-info-pipeline-4&quot;),{title: &quot;Pause pipeline: pipeline-4 &quot;,overlayClose:false})' title='Pause'
                                                type='submit' value='Pause'><span title='Pause'> </span></button>
                                    </div>
                                    <div id='pause-info-pipeline-4' style='display:none'>
                                        <form action='/api/pipelines/pipeline-4/pause' method='post'
                                              onsubmit="PipelineOperations.onPause(this, 'pipeline-4', '/api/pipelines/pipeline-4/pause'); return false;">
                                            <div class='sub_tab_container'>
                                                <div class='pause_reason'> Specify a reason for pausing schedule on pipeline 'pipeline-4': <input type='text' name='pauseCause' maxlength='255'/></div>
                                            </div>
                                            <div class='actions'>
                                                <button class='primary submit' id='pause-pipeline-4' type='submit' value='Ok'><span>OK</span></button>
                                                <button class='submit button' onclick='Modalbox.hide()' type='button' value='Close'><span>CLOSE</span></button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class='divider'></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id='pipeline_group_group-2_panel'>
            <div class='pipeline_bundle pipeline_group'>
                <div class='pipelines'>
                    <div class='content_wrapper_outer'>
                        <div class='content_wrapper_inner'><h2 class='entity_title'>group-2</h2>

                            <div id='pipeline_pipeline-2-1_panel' class='pipeline'>
                                <div class='pipeline_header'>
                                    <div class='pipeline_actions'>
                                    </div>
                                    <div class='pipeline_name_link'><h3 class='title entity_title '><a href='/tab/pipeline/history/pipeline-2-1'>pipeline-2-1</a></h3></div>
                                </div>
                                <div class='alert' id='trigger-result-pipeline-2-1'></div>
                                <div class='pipeline_instance'>
                                    <div class='status'><span class='message'> No historical data </span></div>
                                </div>
                                <div class='pipeline_operations'>
                                    <form accept-charset='UTF-8' action='/api/pipelines/pipeline-2-1/schedule' method='post'
                                          onsubmit="PipelineOperations.onTrigger(this, 'pipeline-2-1', '/api/pipelines/pipeline-2-1/schedule'); return false;; ">
                                        <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
                                        <div class='operate trigger_wrapper'>
                                            <button class='image submit' id='deploy-pipeline-2-1' title='Trigger' type='submit' value='Trigger'><span title='Trigger'> </span></button>
                                        </div>
                                    </form>
                                    <form accept-charset='UTF-8' action='/pipelines/show_for_trigger' method='post'
                                          onsubmit="PipelineOperations.onTriggerWithOptions(this, 'pipeline-2-1', 'Trigger', '/pipelines/show_for_trigger'); return false;; ">
                                        <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
                                        <input type='hidden' name='pipeline_name' value='pipeline-2-1'/>

                                        <div class='operate trigger_with_options_wrapper'>
                                            <button class='image submit' id='deploy-with-options-pipeline-2-1' title='Trigger with options' type='submit' value='Trigger with options'><span
                                                    title='Trigger with options'> </span></button>
                                        </div>
                                    </form>
                                    <div class='operate pause_wrapper'>
                                        <button class='image submit' id='confirm-pause-pipeline-2-1'
                                                onclick='Modalbox.show($(&quot;pause-info-pipeline-2-1&quot;),{title: &quot;Pause pipeline: pipeline-2-1 &quot;,overlayClose:false})' title='Pause'
                                                type='submit' value='Pause'><span title='Pause'> </span></button>
                                    </div>
                                    <div id='pause-info-pipeline-2-1' style='display:none'>
                                        <form action='/api/pipelines/pipeline-2-1/pause' method='post'
                                              onsubmit="PipelineOperations.onPause(this, 'pipeline-2-1', '/api/pipelines/pipeline-2-1/pause'); return false;">
                                            <div class='sub_tab_container'>
                                                <div class='pause_reason'> Specify a reason for pausing schedule on pipeline 'pipeline-2-1': <input type='text' name='pauseCause' maxlength='255'/>
                                                </div>
                                            </div>
                                            <div class='actions'>
                                                <button class='primary submit' id='pause-pipeline-2-1' type='submit' value='Ok'><span>OK</span></button>
                                                <button class='submit button' onclick='Modalbox.hide()' type='button' value='Close'><span>CLOSE</span></button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class='divider'></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        Util.on_load(function() {
            var dashboard_ajax_refresher = new DashboardAjaxRefresher('/pipelines?format=json', {redirectUrl: '/auth/login', className: '.pipeline_group', refreshBegining: function(){ PipelineFilter.unhookCheckboxes();}, refreshCompleted: function(){Util.enable('show_pipelines_selector');}});
            AjaxRefreshers.addRefresher(dashboard_ajax_refresher, true);
        });
    </script>
</div>
</body>
</html>
