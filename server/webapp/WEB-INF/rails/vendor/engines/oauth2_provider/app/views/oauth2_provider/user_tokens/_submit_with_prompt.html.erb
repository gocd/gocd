<%# Careful! This is duplicated at: https://github.com/gocd/gocd/blob/master/server/webapp
    /WEB-INF/rails.new/app/views/admin/shared/_submit_with_prompt.html.erb %>
<script type="text/javascript">
    <%- button_container = scope[:button_container] -%>
    <%- button_id = scope[:button_id] -%>
    <%- button_selector =  button_container==nil ? button_id : button_container+' #'+button_id -%>
    <%- prompt_selector =  button_container==nil ? button_id +' #warning_prompt' : button_container +' #warning_prompt' -%>
    <%- message = scope[:message] -%>
    <%- on_confirmation_js = scope[:on_confirmation_js] -%>
    jQuery(Util.escapeDotsFromId('<%=button_selector-%>')).click(function() {
        Modalbox.show(jQuery(Util.escapeDotsFromId('<%=prompt_selector-%>'))[0], {overlayClose: false, title: 'Confirm Deletion'});
    });
</script>
<div id="warning_prompt" class="warning" style="display:none;">
    <div class="ui-dialog-content">
        <p><%==message-%></p>
    </div>
    <div class="form_buttons actions">
        <button class="primary submit MB_focusable" onclick="<%== on_confirmation_js %>" type="submit" value="Proceed"><span>PROCEED</span></button>
        <button class="submit button MB_focusable" onclick="Modalbox.hide()" type="button" value="Cancel"><span>CANCEL</span></button>
    </div>
</div>
